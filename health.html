<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css" integrity="sha512-HqxHUkJM0SYcbvxUw5P60SzdOTy/QVwA1JJrvaXJv4q7lmbDZCmZaqz01UPOaQveoxfYRv1tHozWGPMcuTBuvQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>身体素质分析</title>
</head>
<body>
    <section class="section">
        <div class="container">
            身高: <input class="input"  type="text" id="height"><br>
            体重: <input class="input"  type="text" id="weight"><br>
            年龄: <input class="input"  type="text" id="age"><br>
            性别: <input class="input"  type="text" id="sex"><br>
            三维: <input class="input"  type="text" id="sw"><br>
            体脂率: <br><span id="tzl"></span><br>
            BMI指数: <br><span id="bmi"></span><br>
            <button class="button is-link" onclick="update()" id="analysis">分析</button>
            <button class="button is-link" onclick="update()">白盒子测试</button>
            <button class="button is-link" onclick="setInterval(blackBoxTest, 1000);">黑盒子测试</button>
            <br><span id="result">测试结果:</span><br>
        </div>
      </section>

   
</body>
<script>
    function update(){
        let Cheight = document.getElementById("height").value;
        let CWeight = document.getElementById("weight").value;
        let Cage = document.getElementById("age").value;
        let Csex = document.getElementById("sex").value;
        let Csw = document.getElementById("sw").value;
        let Cbmi = CWeight/(Cheight*Cheight);
        let Ctzl = 1.2*Cbmi+0.23*Cage-5.4-10.8*(Csex==="男"?1:0);
   
        if(CWeight<1000&&CWeight<1000&&Cage<200&&(Csex=="男"||Csex=="女")){

        document.getElementById("tzl").innerHTML=Ctzl;
        document.getElementById("bmi").innerHTML=Cbmi;
        }
        else{
            document.getElementById("tzl").innerHTML="输入错误";
        document.getElementById("bmi").innerHTML="输入数据错误";
        }

        
    }


    function blackBoxTest(){

        let person = {
            height:Math.random()*1000,
            weight:Math.random()*1000,
            age:Math.random()*200,
            //sex:getRandomChineseWord(),
            sex:Math.random()*2<1?"男":"女",
            sw:Math.random()*200
        };
        let result = {
            bmi:person.weight/((person.height)*person.height),
            tzl:1.2*bmi+0.23*person.age-5.4-10.8*(person.sex==="男"?1:0)
        }
        let Cheight = document.getElementById("height").value;
        let CWeight = document.getElementById("weight").value;
        let Cage = document.getElementById("age").value;
        let Csex = document.getElementById("sex").value;
        let Csw = document.getElementById("sw").value;
        document.getElementById("analysis").click();



        let test_result = compare(person,result);
        
        document.getElementById("result").innerHTML+="\ncase:"+JSON.stringify(person)+"\nexpected:"+JSON.stringify(result)+"\nresult:"+test_result+"\n";

    }
    function compare(a,b){
        let Cheight = document.getElementById("height").value;
        let CWeight = document.getElementById("weight").value;
        let Cage = document.getElementById("age").value;
        let Csex = document.getElementById("sex").value;
        let Csw = document.getElementById("sw").value;
        let Ctzl = document.getElementById("tzl").innerHTML;
        let Cbmi = document.getElementById("bmi").innerHTML;
        if((Ctzl===b.tzl&&Cbmi===b.bmi)||(Ctzl=="输入数据错误")){
            return "<h2>correct<h2>";
        }
        else{
            return "<h2>correct:<h2>";
        }
    }
    function getRandomChineseWord () {
    var _rsl = "";
    var _randomUniCode = Math.floor(Math.random() * (40870 - 19968) + 19968).toString(16);
    eval("_rsl=" + '"\\u' + _randomUniCode + '"');
    return _rsl;
}

</script>

</html>
